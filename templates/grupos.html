<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Grupos - Ejemplo</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    /* Estilo para el mini menú de filtrado */
    .filter-menu {
      position: absolute;
      right: 40px;
      top: 70px;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      z-index: 10;
      min-width: 220px;
    }
    .filter-menu ul {
      list-style: none;
      margin: 0;
      padding: 0;
    }
    .filter-menu li {
      padding: 10px 18px;
      cursor: pointer;
      font-size: 15px;
      transition: background 0.2s;
    }
    .filter-menu li:hover {
      background: #f2f2f2;
    }
    /* Para asegurar que el menú no se superponga al botón */
    .grupos-card-header {
      position: relative;
    }
  </style>
</head>
<body class="page-container">
  <!-- Contenedor de contenido principal -->
  <div class="content">
    <!-- Banner superior -->
    <div class="banner">
      <div class="banner-left">
        <span class="icono-baner"></span>
        <span class="notificaciones">Notificaciones Masivas</span>
      </div>
      <div class="banner-right">
        <span class="welcome-text">Bienvenido(a)</span>
        <span class="user-dropdown-toggle user-name" onclick="toggleUserDropdown()">{{ usuario }}</span>
        <div class="user-dropdown" id="userDropdown">
          <ul>
            <li><a href="{{ url_for('change_password') }}">Cambiar contraseña</a></li>
            <li><a href="{{ url_for('logout') }}">Cerrar sesión</a></li>
          </ul>
        </div>
      </div>
    </div>
    
  <!-- Barra de menú con búsqueda -->
  <div class="menu-bar">
    <ul class="menu-list">
      <li><a href="{{ url_for('home') }}">Inicio</a></li>
      <li><a href="{{ url_for('grupos') }}">Grupos</a></li>
      <li><a href="{{ url_for('notificaciones') }}">Notificaciones</a></li>
      <li><a href="{{ url_for('redactar') }}">Redactar</a></li>
      <li class="active"><a href="{{ url_for('ayuda') }}">Ayuda</a></li>
        <!-- Apartado de búsqueda -->
        <li class="menu-search">
          <form action="#" method="GET">
            <input type="text" placeholder="Buscar">
          </form>
        </li>
      </ul>
    </div>
    
    <!-- Contenido específico para Grupos -->
    <div class="grupos-content">
      <!-- Aquí pueden ir otros elementos o formularios según necesites -->

      <!-- Tarjeta de Grupos -->
      <div class="grupos-card">
        <!-- Encabezado general de la tarjeta -->
        <div class="grupos-card-header">
          <div class="header-left">
            <img src="{{ url_for('static', filename='images/icono_grupo.png') }}" alt="Icono Grupo">
            <span>MIS GRUPOS</span>
          </div>
          <div class="header-right">
            <button onclick="openModal()">Crear Grupo</button>
            <!-- Ícono de filtro -->
            <img src="{{ url_for('static', filename='images/icono_filtro.png') }}"
                 alt="Icono Filtro" class="icono-filtro" onclick="filterGroups()">
          </div>
          <!-- Mini menú de filtrado (desplegable) -->
          <div id="filterMenu" class="filter-menu" style="display: none;">
            <ul>
              <li onclick="sortGroupsBy('services')">Mayor cantidad de servicios</li>
              <li onclick="sortGroupsBy('messages')">Mayor cantidad de mensajes enviados</li>
            </ul>
          </div>
        </div>

        <!-- Barra pivot: encabezado de columnas -->
        <div class="group-row group-header">
          <div class="group-name">Nombre del Grupo</div>
          <div class="group-services">Número de Servicios</div>
          <div class="group-messages">Mensajes Enviados</div>
        </div>

        <!-- Contenedor donde se agregarán los grupos creados -->
        <div id="groupsList" class="groups-list">
          <!-- Los grupos se agregarán dinámicamente -->
        </div>
      </div>

      <!-- Modal de Crear Grupo -->
      <div id="modal" class="modal" style="display:none;">
        <div class="modal-content">
          <span class="close" onclick="closeModal()">&times;</span>
          <h2>Crear grupo</h2>
          <!-- Input para el nombre del grupo -->
          <div class="group-input">
            <input type="text" id="groupName" placeholder="Nombre del grupo" required>
          </div>
          <!-- Sección para añadir servicios -->
          <div class="service-section">
            <!-- Botón para abrir el modal de Añadir Servicios -->
            <button id="addServiceButton" class="service-button" type="button" onclick="openServicesModal()">
              <img src="{{ url_for('static', filename='images/icono_servicio.png') }}" alt="Icono Servicio" class="icono-servicio">
              Añadir Usuario
            </button>
            <!-- Cuadro donde se mostrarán los servicios añadidos -->
            <div class="services-box" id="servicesBox">
              <!-- Se agregarán dinámicamente los servicios seleccionados -->
            </div>
          </div>
          <!-- Pie del modal con botones Cancelar y Aceptar -->
          <div class="modal-footer">
            <button type="button" onclick="cancelModal()">Cancelar</button>
            <button type="button" onclick="acceptModal()">Aceptar</button>
          </div>
        </div>
      </div>

      <!-- Modal de Añadir Servicios -->
      <div id="servicesModal" class="modal" style="display:none;">
        <div class="modal-content">
          <span class="close" onclick="closeServicesModal()">&times;</span>
          <!-- Encabezado con título y barra de búsqueda -->
          <div class="modal-header">
            <h2>Añadir Usuarios</h2>
            <input type="text" id="serviceSearch" placeholder="Buscar servicio...">
          </div>
          <!-- Cuerpo: cuadro con servicios posibles -->
          <div class="modal-body">
            <div class="services-table">
              <table>
                <thead>
                  <tr>
                    <th>Seleccionar</th>
                    <th>Nombre del Usuario</th>
                    <th>Correo Electrónico</th>
                    <th>Número de Teléfono</th>
                  </tr>
                </thead>
                <tbody id="servicesTableBody">
                  <!-- Ejemplo de filas; normalmente se generarían dinámicamente o vía backend -->
                  <tr>
                    <td><input type="checkbox" class="service-checkbox"></td>
                    <td>Usuario A</td>
                    <td>UsuarioA@ejemplo.com</td>
                    <td>1234567890</td>
                  </tr>
                  <tr>
                    <td><input type="checkbox" class="service-checkbox"></td>
                    <td>Usuario B</td>
                    <td>UsuarioB@ejemplo.com</td>
                    <td>0987654321</td>
                  </tr>
                  <!-- Más filas según se necesite -->
                </tbody>
              </table>
            </div>
          </div>
          <!-- Pie del modal de Servicios -->
          <div class="modal-footer">
            <button type="button" onclick="closeServicesModal()">Cancelar</button>
            <button type="button" onclick="acceptServicesModal()">Aceptar</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Footer: Su contenido se mantiene sin cambios -->
  <footer class="footer">
    <div class="footer-left">
      <div class="footer-column">
        <a href="https://www.etecsa.cu/">Nuestra Empresa</a>
        <a href="https://www.etecsa.cu/es/noticias/nota-informativa">Noticias</a>
      </div>
      <div class="footer-column">
        <a href="https://www.google.com/url?sa=t&source=web&rct=j&opi=89978449&url=https://www.youtube.com/channel/UCL0haKOFpVzhnKW3xSZJx9g/videos&ved=2ahUKEwjEl7nGz9uNAxX9nK8BHXnFML8QFnoECBUQAQ&usg=AOvVaw1mq5OFoaKhA0cx4T7ZyC-k">Multimedia</a>
        <a href="https://portal.etecsa.cu/portalApp/listado">Servicios Internos</a>
      </div>
    </div>
    <div class="footer-right">
      <img src="{{ url_for('static', filename='images/icono_logo.png') }}" alt="Logo"  style="width: 90px; height: 50px;">
      <span>&copy; {{ year }} Empresa de Telecomunicaciones de Cuba S.A (ETECSA) </span>
    </div>
  </footer>
  
  <!-- Enlace al archivo JavaScript externo -->
  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>